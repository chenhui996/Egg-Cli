# cli 项目创建功能架构设计

## 架构背后的思考

- **可扩展**：能够快速复用到**不同团队**，适用**不同团队之间的差异**。
- **低成本**：在不改动 cli 源码的情况下，能够**新增模版**，且**新增模版的成本很低**。
- **高性能**：控制存储空间，安装时充分利用 Node 多进程提升安装性能。控制存储空间，安装时充分利用 Node 多进程提升安装性能。

---

### 准备阶段（prepare）

- **start**
- **当前目录是否为空**：
  - Y：**是否为 -> 强制更新**
    - Y：清空当前目录 -> 获取项目类型（项目/组件）-> 填写项目名称 -> 项目名称 format -> 填写版本号 -> **项目类型是否为组件**
    - N：获取项目类型（项目/组件）-> 填写项目名称 -> 项目名称 format -> 填写版本号 -> **项目类型是否为组件**
  - N：**询问是否继续创建**
    - Y：是为 -> 强制更新
      - 清空当前目录
      - ...
    - N：**end**
- **项目类型是否为组件**
  - Y：填写描述信息
    - **end**
  - N：**end**

---

### 下载阶段（downloadTemplate）

- **start**
- **选择项目/组件代码模版**：
  - 生成 Package 对象 -> **Package 对象是否存在?**
- **Package 对象是否存在?**
  - Y：更新 Package
  - N：安装 Package
    - **检查模版是否存在**
      - Y：**end**
      - N：模版不存在，终止执行 -> **end**
